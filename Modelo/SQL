CREATE TABLE usuario(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	nombre TEXT NOT NULL,
	apellido TEXT NOT NULL,
	genero CHARACTER(1),
	nick_name TEXT,
	foto BLOB,
	escuela INTEGER FOREIGN KEY,
	password PASSWORD NOT NULL,
	nacionalidad INTEGER FOREIGN KEY,
	f_nacimiento DATE NOT NULL,
	rating REAL NOT NULL
);

CREATE TABLE paises(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	pais TEXT NOT NULL,
	nacionalidad TEXT NOT NULL
);

CREATE TABLE escuela(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	nombre TEXT NOT NULL,
	imagen BLOB
);

CREATE TABLE publicaciones(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	id_usuario INTEGER FOREIGN KEY NOT NULL,
	id_grupo INTEGER FOREIGN KEY NOT NULL,
	id_archivo INTEGER FOREIGN KEY,
	id_materia INTEGER FOREIGN KEY NOT NULL,
	fecha DATE NOT NULL,
	visibilidad INTEGER
);

CREATE TABLE carrera(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	nombre TEXT NOT NULL
);

CREATE TABLE institucion(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	nombre TEXT NOT NULL,
	id_pais INTEGER FOREIGN KEY NOT NULL,
	id_ciudad INTEGER FOREIGN KEY NOT NULL,
	imagen BLOB,
	web_site TEXT
);

CREATE TABLE ciudad(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	nombre TEXT NOT NULL,
	pais INTEGER FOREIGN KEY NOT NULL
);

CREATE TABLE notificaciones(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	id_usuario INTEGER FOREIGN KEY NOT NULL,
	texto TEXT NOT NULL,
	visto INTEGER NULL,
	fecha DATE NOT NULL
);

CREATE TABLE mensajes(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	id_remitente INTEGER FOREIGN KEY NOT NULL,
	id_destinatario INTEGER FOREIGN KEY NOT NULL,
	mensaje TEXT NOT NULL,
	fecha DATE NOT NULL
);

CREATE TABLE grupos(
       id INTEGER PRIMARY KEY AUTOINCREMENT,
       nombre TEXT NOT NULL,
       imagen BLOB,
       visibilidad INTEGER NOT NULL,
       id_usuario INTEGER FOREIGN KEY NOT NULL
);

CREATE TABLE grupo_usuario(
       id INTEGER PRIMARY KEY AUTOINCREMENT,
       id_grupo INTEGER FOREIGN KEY NOT NULL,
       id_usuario INTEGER FOREIGN KEY NOT NULL
);     

CREATE TABLE carrera_escuela(
       id INTEGER PRIMARY KEY AUTOINCREMENT,
       id_carrera INTEGER FOREIGN KEY NOT NULL,
       id_escuela INTEGER FOREIGN KEY NOT NULL,
);

CREATE TABLE rating(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	id_usuario INTEGER FOREIGN KEY,
	calificacion Real NOT NULL
);

CREATE TABLE materias(
	id INTEGER PRIMARY KEY,
	materia TEXT NOT NULL,
	id_categoria INTEGER FOREIGN KEY NOT NULL
);

CREATE TABLE categoria(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	nombre TEXT NOT NULL
);

CREATE TABLE archivos(
       id INTEGER PRIMARY KEY AUTOINCREMENT,	
       url_archivo TEXT NOT NULL,		
       id_usuario INTEGER FOREIGN KEY NOT NULL,		
       id_grupo INTEGER FOREIGN KEY NOT NULL
);

CREATE TABLE persona_carrera(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	id_usuario INTEGER FOREIGN KEY NOT NULL,
	id_carrera_titulo INTEGER FOREIGN KEY NOT NULL
);
